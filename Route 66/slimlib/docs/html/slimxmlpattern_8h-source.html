<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Slim Library: slimxmlpattern.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>slimxmlpattern.h</h1><pre class="fragment"><div>00001 <span class="preprocessor">#ifndef _SLIMXMLPATTERN_</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _SLIMXMLPATTERN_</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;slimcore.h&gt;</span>
00005 <span class="preprocessor">#include &lt;slimxmlparser.h&gt;</span>
00006 
00007 <span class="preprocessor">#define SXP_XMLNS                   "xmlns:sxp"</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#define SXP_XMLNS_CONTENT           "http://iihm.imag.fr/balme/sxp/01/pattern"</span>
00009 <span class="preprocessor"></span>
00010 <span class="comment">//sxp language keyword</span>
00011 <span class="preprocessor">#define SXP_PATTERN                 "sxp:pattern"</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#define SXP_AND                     "sxp:and"</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define SXP_OR                      "sxp:or"</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#define SXP_ELEMENT                 "sxp:element"</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define SXP_SIMPLECONTENT_EQUAL     "sxp:simplecontent_equal"</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define SXP_SIMPLECONTENT_MATCH     "sxp:simplecontent_match"</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#define SXP_SIMPLECONTENT_CONTAIN   "sxp:simplecontent_contain"</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#define SXP_SIMPLECONTENT_EXCLUDE   "sxp:simplecontent_exclude"</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#define SXP_COMPLEXCONTENT_CONTAIN  "sxp:complexcontent_contain"</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define SXP_COMPLEXCONTENT_EXCLUDE  "sxp:complexcontent_exclude"</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define SXP_ATTRIBUTE_ID            "sxp:id"</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define SXP_ATTRIBUTE_NAME          "sxp:name"</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define SXP_RESULT_ELEMENT_NAME         "sxp:pattern_match"</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#define SXP_NO_ERROR                    0</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define SXP_FALSE                                               0</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define SXP_TRUE                                                1</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define SXP_NO_PATTERN_TAG                              2</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define SXP_NO_SCHEMA_REFERENCE                 3</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define SXP_NAMESPACE_NOT_SUPPORTED             4</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define SXP_ERROR_NO_PATTERN_ID         5</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define SXP_ERROR_UNEXPECTED_END        6</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define SXP_NO_NAME_ATTRIBUTE                   7</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define SXP_UNKNOWN_OPERATOR                    8</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define SXP_NO_OPERATOR_DATA                    9</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#define SXPPI_AND                                               0</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_OR                                                1</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_ELEMENT                                   10</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_COMPLEXCONTENT_CONTAIN    20</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_COMPLEXCONTENT_EXCLUDE    21</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_SIMPLECONTENT_CONTAIN             22</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_SIMPLECONTENT_EQUAL               23</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_SIMPLECONTENT_MATCH               24</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define SXPPI_SIMPLECONTENT_EXCLUDE             26</span>
00046 <span class="preprocessor"></span>
00047 <span class="preprocessor">#define SXP_TOPLEVEL_ELEMENT                    true</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define SXP_SUB_ELEMENT                                 false</span>
00049 <span class="preprocessor"></span>
00050 <span class="keyword">class </span>PatternItem;
00051 
00052 <span class="keyword">class </span>SxpElement
00053 {
00054         <span class="keyword">private</span>:
00055                 <a class="code" href="classSlimVector.html">SlimVector&lt;XmlNode&gt;</a> matches;
00056                 <span class="keywordtype">int</span> match;
00057                 <span class="keywordtype">char</span> *element_id;
00058                 <span class="keywordtype">char</span> *element_name;
00059                 PatternItem *element_pattern;
00060                 
00061         <span class="keyword">public</span>:
00062                 SxpElement(<span class="keyword">const</span> <span class="keywordtype">char</span> *element_name, <span class="keyword">const</span> <span class="keywordtype">char</span> *element_id);
00063                 <span class="keywordtype">void</span> setElementPattern(PatternItem *element_pattern);
00064                 <span class="keyword">const</span> <span class="keywordtype">char</span> *getId() const;
00065                 <span class="keywordtype">long</span> getNbOfMatches(<span class="keywordtype">void</span>) const;
00066                 <a class="code" href="classXmlNode.html">XmlNode</a> *getMatchAt(<span class="keywordtype">int</span> position);
00067                 <span class="keywordtype">int</span> isMatch(<a class="code" href="classXmlNode.html">XmlNode</a> *source, <span class="keywordtype">bool</span> toplevel);
00068                 <span class="keywordtype">int</span> evaluate(<span class="keywordtype">void</span>) const;
00069                 <span class="keywordtype">void</span> print(<span class="keywordtype">void</span>) const;
00070 };
00071 
00072 
00073 
00074 
00075 class PatternItem
00076 {
00077         <span class="keyword">private</span>:
00078                 <span class="keywordtype">int</span> op;
00079                 <a class="code" href="classSlimVector.html">SlimVector&lt;PatternItem&gt;</a> operands;
00080                 SxpElement *element;
00081                 <span class="keywordtype">char</span> *data;
00082                 
00083         <span class="keyword">public</span>:
00084                 PatternItem(<span class="keywordtype">int</span> op);
00085                 PatternItem(SxpElement *element);
00086                 <span class="keywordtype">int</span> addOperand(PatternItem *item);
00087                 <span class="keywordtype">void</span> setData(<span class="keyword">const</span> <span class="keywordtype">char</span> *data);
00088                 <span class="keywordtype">int</span> isMatch(<a class="code" href="classXmlNode.html">XmlNode</a> *source);
00089                 <span class="keywordtype">int</span> evaluate();
00090 };
00091 
00092 
00093 
00094 
00095 <span class="keyword">class </span>Pattern
00096 {
00097         <span class="keyword">private</span>:
00098                 <span class="keywordtype">char</span> *<span class="keywordtype">id</span>;
00099                 PatternItem *topLevelItem;
00100                 <a class="code" href="classSlimVector.html">SlimVector&lt;SxpElement&gt;</a> topLevelElements;
00101         
00102         <span class="keyword">public</span>:
00103                 Pattern(<span class="keyword">const</span> <span class="keywordtype">char</span> *pattern_id);
00104                 <span class="keywordtype">void</span> setTopLevelItem(PatternItem *patternItem);
00105                 PatternItem *getTopLevelItem(<span class="keywordtype">void</span>) const;
00106                 const <span class="keywordtype">char</span> *getId(<span class="keywordtype">void</span>) const;
00107                 <span class="keywordtype">void</span> addTopLevelElement(SxpElement *element);
00108                 <span class="keywordtype">long</span> getNbOfTopLevelElement(<span class="keywordtype">void</span>) const;
00109                 SxpElement *getTopLevelElementAt(<span class="keywordtype">int</span> position);
00110                 <span class="keywordtype">void</span> print(<span class="keywordtype">void</span>) const;
00111 };
00112 
00113 
<a name="l00123"></a><a class="code" href="classSlimXmlPattern.html">00123</a> class <a class="code" href="classSlimXmlPattern.html">SlimXmlPattern</a>
00124 {
00125     <span class="keyword">private</span>:
00126         <a class="code" href="classSlimXmlParser.html">SlimXmlParser</a> *xmlParser;
00127         Pattern *pattern;
00128         
00129         <span class="keywordtype">int</span> lastError;
00130         <span class="keywordtype">void</span> init(<span class="keywordtype">void</span>);
00131         
00132         PatternItem *compile_toplevel_operator(<a class="code" href="classXmlNode.html">XmlNode</a> *node, <span class="keywordtype">int</span> op);
00133         PatternItem *compile_element(<a class="code" href="classXmlNode.html">XmlNode</a> *node, <span class="keywordtype">bool</span> toplevel);
00134         PatternItem *compile_element_operator(<a class="code" href="classXmlNode.html">XmlNode</a> *node, <span class="keywordtype">int</span> op);
00135         <span class="keywordtype">void</span> analyse_element(<a class="code" href="classXmlNode.html">XmlNode</a> *element, Pattern *pattern);
00136             
00137     <span class="keyword">public</span>:
00141         SlimXmlPattern(<span class="keywordtype">void</span>);
00142         
00143         
00144         
00149         SlimXmlPattern(<a class="code" href="classSlimXmlParser.html">SlimXmlParser</a> *xmlParser);
00150         
00151         
00152         
00158         Pattern *compile_pattern(<span class="keyword">const</span> <span class="keywordtype">char</span> *pattern);
00159         
00160 
00161         
00168         Pattern *compile_pattern(<a class="code" href="classXmlNode.html">XmlNode</a> *pattern);
00169         
00170         
00171         
00179         <a class="code" href="classXmlNode.html">XmlNode</a> *getMatch(<span class="keyword">const</span> <span class="keywordtype">char</span> *source, Pattern *pattern);
00180         
00181         
00182         
00190         <a class="code" href="classXmlNode.html">XmlNode</a> *getMatch(<a class="code" href="classXmlNode.html">XmlNode</a> *source, Pattern *pattern);
00191         
00192         
00196         <span class="keywordtype">int</span> getLastError(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
00197 };
00198 
00199 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Apr 6 16:05:40 2005 for Slim Library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
